<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Protect Webhook Platform Admin</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Protect Webhook Admin</h1>
    <div id="auth">
      <input type="password" id="adminSecret" placeholder="Admin Secret" />
      <button id="btnLogin">Login</button>
      <span id="loginStatus" class="status"></span>
    </div>
  </header>
  <main>
    <section id="webhooksSection">
      <h2>Webhooks</h2>
      <!DOCTYPE html>
      <html lang="it">
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Homebridge Protect Webhook Admin</title>
        <link rel="stylesheet" href="/admin/ui/styles.css" />
      </head>
      <body>
        <header>
          <h1>Webhook & Email Admin</h1>
        </header>
        <main>
          <section class="login" id="loginSection">
            <h2>Accesso</h2>
            <div class="form-row">
              <label for="adminSecret">Admin Secret (se configurato)</label>
              <input type="password" id="adminSecret" placeholder="********" />
              <button id="btnLogin">Login</button>
              <span id="loginStatus" class="status">Non autenticato</span>
            </div>
            <p class="hint">L'accesso consente di generare URL temporanei senza esporre il token permanente nei log.</p>
          </section>

          <section>
            <h2>Webhooks</h2>
            <table id="webhooksTable">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>Percorso</th>
                  <th>URL Base</th>
                  <th>Token Permanente</th>
                  <th>Azioni</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>

          <section>
            <h2>Email Triggers</h2>
            <table id="emailTable">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>Host IMAP</th>
                  <th>Debounce (s)</th>
                  <th>Durata Evento (s)</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>

          <section id="ephemeralOutput" class="hidden">
            <h2>URL Temporaneo Generato</h2>
            <pre id="ephemeralContent"></pre>
          </section>
        </main>
        <footer>
          <small>Plugin Homebridge Unifi Protect Webhook - UI amministrativa</small>
        </footer>
        <script src="/admin/ui/app.js" type="module"></script>
      </body>
      </html>
