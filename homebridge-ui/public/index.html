<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Protect Webhook - Admin</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div id="hb-protect-ui">
  <header class="hb-ui-header">
    <h1>Webhook & Email - Admin (Integrato)</h1>
  </header>
  <main class="hb-ui-main">
    <section class="hb-ui-section">
      <div style="display:flex; gap:.5rem; align-items:center;">
        <button id="btnRefresh" class="action">Aggiorna stato</button>
        <button id="btnPing" class="action secondary">Ping</button>
        <span id="diagMsg" class="status"></span>
      </div>
    </section>
    <section class="hb-ui-section">
      <h2>Webhooks</h2>
      <table id="webhooksTable" class="hb-ui-table">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Percorso</th>
            <th>URL Base</th>
            <th>Token Permanente</th>
            <th>Azioni</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section class="hb-ui-section">
      <h2>Email Triggers</h2>
      <table id="emailTable" class="hb-ui-table">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Host IMAP</th>
            <th>Debounce (s)</th>
            <th>Durata Evento (s)</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section id="ephemeralOutput" class="hb-ui-section hidden">
      <h2>Output</h2>
      <pre id="ephemeralContent"></pre>
    </section>
  </main>
  <footer class="hb-ui-footer">
    <small>UI integrata in Homebridge - Non espone segreti nei log</small>
  </footer>
  </div>
  <script src="./ui-app.js" type="module"></script>
</body>
</html>
